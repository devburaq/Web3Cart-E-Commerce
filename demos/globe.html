<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Web3Cart Live Pulse</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=Inter:wght@400;700&display=swap" rel="stylesheet">

    <script src="https://unpkg.com/three@0.146.0/build/three.min.js"></script>
    <script src="https://unpkg.com/globe.gl@2.27.0/dist/globe.gl.min.js"></script>

    <style>
        /* --- CORE STYLES --- */
        :root {
            --bg-color: #050505;
            --primary-color: #00ff88;
            --secondary-color: #00c6ff;
            --text-color: #ffffff;
            --panel-bg: rgba(10, 10, 10, 0.85);
        }

        body {
            margin: 0;
            padding: 0;
            background-color: var(--bg-color);
            font-family: 'Inter', sans-serif;
            overflow: hidden; 
        }

        /* --- CONTAINER --- */
        #globe-wrapper {
            position: relative;
            width: 100%;
            height: 100vh;
            min-height: 600px;
            background: #050505; /* Fallback color */
            /* Starry Background generated by CSS */
            background-image: 
                radial-gradient(white, rgba(255,255,255,.2) 2px, transparent 3px),
                radial-gradient(white, rgba(255,255,255,.15) 1px, transparent 2px),
                radial-gradient(white, rgba(255,255,255,.1) 2px, transparent 3px);
            background-size: 550px 550px, 350px 350px, 250px 250px;
            background-position: 0 0, 40px 60px, 130px 270px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* --- OVERLAYS --- */
        
        /* 1. Main Title */
        .hero-overlay {
            position: absolute;
            top: 10%;
            left: 50%;
            transform: translateX(-50%);
            text-align: center;
            z-index: 10;
            pointer-events: none;
            width: 90%;
            max-width: 800px;
        }

        .hero-title {
            font-family: 'Share Tech Mono', monospace;
            font-size: 3rem;
            color: #fff;
            text-transform: uppercase;
            letter-spacing: 4px;
            margin-bottom: 10px;
            text-shadow: 0 0 20px rgba(0, 255, 136, 0.5);
        }

        .hero-subtitle {
            font-size: 1.1rem;
            color: rgba(255, 255, 255, 0.7);
            background: rgba(0,0,0,0.6);
            padding: 10px 20px;
            border-radius: 30px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            display: inline-block;
        }

        .highlight { color: var(--primary-color); font-weight: bold; }

        /* 2. Live Transaction Feed */
        .feed-panel {
            position: absolute;
            bottom: 50px;
            left: 50px;
            width: 350px;
            z-index: 10;
            font-family: 'Share Tech Mono', monospace;
        }

        .feed-header {
            color: var(--primary-color);
            font-size: 0.9rem;
            text-transform: uppercase;
            border-bottom: 1px solid var(--primary-color);
            padding-bottom: 5px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
        }

        .live-dot {
            width: 8px;
            height: 8px;
            background-color: var(--primary-color);
            border-radius: 50%;
            display: inline-block;
            animation: pulse 1s infinite;
        }

        .feed-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
            mask-image: linear-gradient(to bottom, black 80%, transparent 100%);
        }

        .feed-item {
            background: var(--panel-bg);
            border-left: 3px solid var(--secondary-color);
            padding: 12px;
            border-radius: 0 8px 8px 0;
            color: #fff;
            font-size: 0.85rem;
            box-shadow: 0 5px 15px rgba(0,0,0,0.5);
            animation: slideIn 0.3s ease-out forwards;
            backdrop-filter: blur(5px);
            opacity: 0;
            transform: translateX(-20px);
        }

        .feed-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 4px;
        }

        .feed-route { color: #aaa; font-size: 0.75rem; }
        .feed-amount { color: #fff; font-weight: bold; }
        .feed-meta { font-size: 0.7rem; color: #666; }
        .feed-fee { color: var(--primary-color); }

        /* --- ANIMATIONS --- */
        @keyframes pulse {
            0% { opacity: 1; box-shadow: 0 0 0 0 rgba(0, 255, 136, 0.7); }
            70% { opacity: 0.5; box-shadow: 0 0 0 10px rgba(0, 255, 136, 0); }
            100% { opacity: 1; box-shadow: 0 0 0 0 rgba(0, 255, 136, 0); }
        }

        @keyframes slideIn {
            to { opacity: 1; transform: translateX(0); }
        }

        @media (max-width: 768px) {
            .hero-title { font-size: 2rem; }
            .feed-panel { left: 20px; right: 20px; width: auto; bottom: 20px; }
            .feed-item { padding: 10px; }
        }

    </style>
</head>
<body>

<div id="globe-wrapper">
    
    <div class="hero-overlay">
        <div class="hero-title">THE GLOBAL MONEY PULSE</div>
        <div class="hero-subtitle">
            Borders remain on maps. <span class="highlight">Money knows no borders.</span>
        </div>
    </div>

    <div class="feed-panel">
        <div class="feed-header">
            <span>LIVE TRANSACTIONS</span>
            <span class="live-dot"></span>
        </div>
        <div class="feed-list" id="feedList"></div>
    </div>

    <div id="globeViz"></div>

</div>

<script>
    /**
     * DATA CONFIGURATION
     */
    const N_ARCS = 20; 
    const COLORS = ['#00ff88', '#00c6ff', '#ff00ff', '#ffff00'];
    
    // Stable Coordinates
    const countries = [
        { name: "USA", lat: 37.09, lng: -95.71 },
        { name: "Germany", lat: 51.16, lng: 10.45 },
        { name: "Japan", lat: 36.20, lng: 138.25 },
        { name: "Brazil", lat: -14.23, lng: -51.92 },
        { name: "Australia", lat: -25.27, lng: 133.77 },
        { name: "India", lat: 20.59, lng: 78.96 },
        { name: "UK", lat: 55.37, lng: -3.43 },
        { name: "South Africa", lat: -30.55, lng: 22.93 },
        { name: "Canada", lat: 56.13, lng: -106.34 },
        { name: "China", lat: 35.86, lng: 104.19 },
        { name: "Nigeria", lat: 9.08, lng: 8.67 },
        { name: "Argentina", lat: -38.41, lng: -63.61 },
        { name: "Turkey", lat: 38.96, lng: 35.24 },
        { name: "Singapore", lat: 1.35, lng: 103.81 },
        { name: "UAE", lat: 23.42, lng: 53.84 }
    ];

    const currencies = ["USDT", "ETH", "BTC", "BNB", "SOL"];

    // 1. Transaction Generator
    function getRandomTransaction() {
        const src = countries[Math.floor(Math.random() * countries.length)];
        let dst = countries[Math.floor(Math.random() * countries.length)];
        while (src.name === dst.name) dst = countries[Math.floor(Math.random() * countries.length)];

        const amount = (Math.random() * 5000 + 50).toFixed(2);
        const fee = (Math.random() * 0.5 + 0.01).toFixed(2);
        const coin = currencies[Math.floor(Math.random() * currencies.length)];
        const color = COLORS[Math.floor(Math.random() * COLORS.length)];

        return {
            startLat: src.lat, startLng: src.lng,
            endLat: dst.lat, endLng: dst.lng,
            color: color,
            amount: amount, fee: fee, coin: coin,
            srcName: src.name, dstName: dst.name
        };
    }

    // 2. Update Feed UI
    function updateFeed(tx) {
        const list = document.getElementById('feedList');
        const item = document.createElement('div');
        item.className = 'feed-item';
        item.style.borderLeftColor = tx.color;
        item.innerHTML = `
            <div class="feed-row">
                <span class="feed-amount">${tx.amount} ${tx.coin}</span>
                <span class="feed-fee">Fee: $${tx.fee}</span>
            </div>
            <div class="feed-row">
                <span class="feed-route">${tx.srcName} âœˆ ${tx.dstName}</span>
                <span class="feed-meta">Now</span>
            </div>
        `;
        list.prepend(item);
        if (list.children.length > 5) list.lastElementChild.remove();
    }

    // 3. Initialize Globe (Vector Mode - No Images)
    // We load a small GeoJSON file to draw polygons. This is much more reliable than textures.
    fetch('https://raw.githubusercontent.com/vasturiano/globe.gl/master/example/datasets/ne_110m_admin_0_countries.geojson')
        .then(res => res.json())
        .then(countriesData => {
            
            const arcsData = [];
            
            const world = Globe()
                (document.getElementById('globeViz'))
                .width(window.innerWidth)
                .height(window.innerHeight)
                .backgroundColor('rgba(0,0,0,0)') // Transparent to see CSS stars
                
                // 4. Draw Polygons (Land)
                .polygonsData(countriesData.features)
                .polygonCapColor(() => '#1a1a1a') // Dark grey land
                .polygonSideColor(() => '#002200')
                .polygonStrokeColor(() => '#00ff88') // Green borders
                .polygonLabel(({ properties: d }) => `
                    <div style="background:rgba(0,0,0,0.8); padding:5px; border:1px solid #00ff88; color:#fff;">
                        ${d.ADMIN}
                    </div>
                `)
                
                // 5. Arcs (Transactions)
                .arcColor('color')
                .arcDashLength(0.4)
                .arcDashGap(2)
                .arcDashInitialGap(1)
                .arcDashAnimateTime(1500)
                .arcStroke(0.6)
                .arcsData(arcsData)
                
                // 6. Rings (Explosion effect at destination)
                .ringsData([])
                .ringColor(() => t => `rgba(255,100,50,${1-t})`)
                .ringMaxRadius(5)
                .ringPropagationSpeed(5)
                .ringRepeatPeriod(0);

            // Auto-rotate
            world.controls().autoRotate = true;
            world.controls().autoRotateSpeed = 0.6;
            world.controls().enableZoom = false;

            // 7. Loop
            setInterval(() => {
                const tx = getRandomTransaction();
                
                // Add Arc
                arcsData.push(tx);
                if (arcsData.length > N_ARCS) arcsData.shift();
                world.arcsData(arcsData);

                // Add Ring (Ripple effect at destination)
                const ringsData = [{ lat: tx.endLat, lng: tx.endLng }];
                world.ringsData(ringsData);

                // Update UI
                updateFeed(tx);
            }, 1000);

            // Responsive Fix
            window.addEventListener('resize', () => {
                world.width(window.innerWidth);
                world.height(window.innerHeight);
            });
        });

</script>

</body>
</html>